<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Edzer Pebesma" />


<title></title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore"><ol start="3" style="list-style-type: decimal">
<li>Manipulating Simple Feature Geometries</li>
</ol></h1>
<h4 class="author">Edzer Pebesma</h4>



<p><strong>For a better version of the sf vignettes see</strong> <a href="https://r-spatial.github.io/sf/articles/" class="uri">https://r-spatial.github.io/sf/articles/</a></p>
<p>knitr::opts_chunk<span class="math inline">\(set(fig.height = 4.5) knitr::opts_chunk\)</span>set(fig.width = 6)</p>
<p>This vignetted describes how simple feature geometries can be manipulated, where manipulations include</p>
<ul>
<li>type transformations (e.g., <code>POLYGON</code> to <code>MULTIPOLYGON</code>)</li>
<li>affine transformation (shift, scale, rotate)</li>
<li>transformation into a different coordinate reference system</li>
<li>geometrical operations, e.g. finding the centroid of a polygon, detecting whether pairs of feature geometries intersect, or find the union (overlap) of two polygons.</li>
</ul>
<div id="type-transformations" class="section level2">
<h2>Type transformations</h2>
<p>This sections discusses how simple feature geometries of one type can be converted to another. For converting lines to polygons, see also <code>st_polygonize</code> below.</p>
<div id="for-single-geometries" class="section level3">
<h3>For single geometries</h3>
<p>For single geometries, <code>st_cast</code> will</p>
<ol style="list-style-type: decimal">
<li>convert from XX to MULTIXX, e.g. <code>LINESTRING</code> to <code>MULTILINESTRING</code></li>
<li>convert from MULTIXX to XX if MULTIXX has length one (else, it will still convert but warn about loss of information)</li>
<li>convert from MULTIXX to XX if MULTIXX does not have length one, but it will warn about the loss of information</li>
<li>convert GEOMETRYCOLLECTION of length one to its component if</li>
</ol>
<p>Examples of the first three types are</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sf)
<span class="kw">suppressPackageStartupMessages</span>(<span class="kw">library</span>(dplyr))
<span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_cast</span>(<span class="st">&quot;MULTIPOINT&quot;</span>)
## MULTIPOINT ((1 1))
<span class="kw">st_multipoint</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_cast</span>(<span class="st">&quot;POINT&quot;</span>)
## Warning in st_cast.MULTIPOINT(., &quot;POINT&quot;): point from first coordinate only
## POINT (1 1)
<span class="kw">st_multipoint</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_cast</span>(<span class="st">&quot;POINT&quot;</span>)
## Warning in st_cast.MULTIPOINT(., &quot;POINT&quot;): point from first coordinate only
## POINT (1 1)</code></pre></div>
<p>Examples of the fourth type are</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_geometrycollection</span>(<span class="kw">list</span>(<span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)))) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_cast</span>(<span class="st">&quot;POINT&quot;</span>)
## POINT (1 1)</code></pre></div>
</div>
<div id="for-collections-of-geometry-sfc-and-simple-feature-collections-sf" class="section level3">
<h3>For collections of geometry (sfc) and simple feature collections (sf)</h3>
<p>It should be noted here that when reading geometries using <code>st_read</code>, the <code>type</code> argument can be used to control the class of the returned geometry:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shp =<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;shape/nc.shp&quot;</span>, <span class="dt">package=</span><span class="st">&quot;sf&quot;</span>)
<span class="kw">class</span>(<span class="kw">st_geometry</span>(<span class="kw">st_read</span>(shp, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)))
## [1] &quot;sfc_MULTIPOLYGON&quot; &quot;sfc&quot;
<span class="kw">class</span>(<span class="kw">st_geometry</span>(<span class="kw">st_read</span>(shp, <span class="dt">quiet =</span> <span class="ot">TRUE</span>, <span class="dt">type =</span> <span class="dv">3</span>)))
## [1] &quot;sfc_POLYGON&quot; &quot;sfc&quot;
<span class="kw">class</span>(<span class="kw">st_geometry</span>(<span class="kw">st_read</span>(shp, <span class="dt">quiet =</span> <span class="ot">TRUE</span>, <span class="dt">type =</span> <span class="dv">1</span>)))
## [1] &quot;sfc_GEOMETRY&quot; &quot;sfc&quot;</code></pre></div>
<p>This option is handled by the GDAL library; in case of failure to convert to the target type, the original types are returned, which in this case is a mix of <code>POLYGON</code> and <code>MULTIPOLYGON</code> geometries, leading to a <code>GEOMETRY</code> as superclass. When we try to read multipolygons as polygons, all secondary rings of multipolygons get lost.</p>
<p>When functions return objects with mixed geometry type (<code>GEOMETRY</code>), downstream functions such as <code>st_write</code> may have difficulty handling them. For some of these cases, <code>st_cast</code> may help modifying their type. For sets of geometry objects (<code>sfc</code>) and simple feature sets (<code>sf),</code>st_cast` can be used by specifying the target type, or without specifying it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ls &lt;-<span class="st"> </span><span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)))
mls &lt;-<span class="st"> </span><span class="kw">st_multilinestring</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)), <span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))))
(sfc &lt;-<span class="st"> </span><span class="kw">st_sfc</span>(ls,mls))
## Geometry set for 2 features 
## geometry type:  GEOMETRY
## dimension:      XY
## bbox:           xmin: 0 ymin: 0 xmax: 2 ymax: 3
## CRS:            NA
## LINESTRING (0 0, 1 1, 2 1)
## MULTILINESTRING ((2 2, 1 3), (0 0, 1 1, 2 1))
<span class="kw">st_cast</span>(sfc, <span class="st">&quot;MULTILINESTRING&quot;</span>)
## Geometry set for 2 features 
## geometry type:  MULTILINESTRING
## dimension:      XY
## bbox:           xmin: 0 ymin: 0 xmax: 2 ymax: 3
## CRS:            NA
## MULTILINESTRING ((0 0, 1 1, 2 1))
## MULTILINESTRING ((2 2, 1 3), (0 0, 1 1, 2 1))
sf &lt;-<span class="st"> </span><span class="kw">st_sf</span>(<span class="dt">a =</span> <span class="dv">5</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">geom =</span> sfc)
<span class="kw">st_cast</span>(sf, <span class="st">&quot;MULTILINESTRING&quot;</span>)
## Simple feature collection with 2 features and 1 field
## geometry type:  MULTILINESTRING
## dimension:      XY
## bbox:           xmin: 0 ymin: 0 xmax: 2 ymax: 3
## CRS:            NA
##   a                           geom
## 1 5 MULTILINESTRING ((0 0, 1 1,...
## 2 4 MULTILINESTRING ((2 2, 1 3)...</code></pre></div>
<p>When no target type is given, <code>st_cast</code> tries to be smart for two cases:</p>
<ol style="list-style-type: decimal">
<li>if the class of the object is <code>GEOMETRY</code>, and all elements are of identical type, and</li>
<li>if all elements are length-one <code>GEOMETRYCOLLECTION</code> objects, in which case <code>GEOMETRYCOLLECTION</code> objects are replaced by their content (which may be a <code>GEOMETRY</code> mix again)</li>
</ol>
<p>Examples are:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ls &lt;-<span class="st"> </span><span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)))
mls1 &lt;-<span class="st"> </span><span class="kw">st_multilinestring</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)), <span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))))
mls2 &lt;-<span class="st"> </span><span class="kw">st_multilinestring</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>),<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>)), <span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>))))
(sfc &lt;-<span class="st"> </span><span class="kw">st_sfc</span>(ls,mls1,mls2))
## Geometry set for 3 features 
## geometry type:  GEOMETRY
## dimension:      XY
## bbox:           xmin: 0 ymin: 0 xmax: 4 ymax: 4
## CRS:            NA
## LINESTRING (0 0, 1 1, 2 1)
## MULTILINESTRING ((2 2, 1 3), (0 0, 1 1, 2 1))
## MULTILINESTRING ((4 4, 4 3), (2 2, 2 1, 3 1))
<span class="kw">class</span>(sfc[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])
## [1] &quot;sfc_MULTILINESTRING&quot; &quot;sfc&quot;
<span class="kw">class</span>(<span class="kw">st_cast</span>(sfc[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]))
## [1] &quot;sfc_MULTILINESTRING&quot; &quot;sfc&quot;

gc1 &lt;-<span class="st"> </span><span class="kw">st_geometrycollection</span>(<span class="kw">list</span>(<span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)))))
gc2 &lt;-<span class="st"> </span><span class="kw">st_geometrycollection</span>(<span class="kw">list</span>(<span class="kw">st_multilinestring</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)), <span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))))))
gc3 &lt;-<span class="st"> </span><span class="kw">st_geometrycollection</span>(<span class="kw">list</span>(<span class="kw">st_multilinestring</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>),<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>)), <span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>))))))
(sfc &lt;-<span class="st"> </span><span class="kw">st_sfc</span>(gc1,gc2,gc3))
## Geometry set for 3 features 
## geometry type:  GEOMETRYCOLLECTION
## dimension:      XY
## bbox:           xmin: 0 ymin: 0 xmax: 4 ymax: 4
## CRS:            NA
## GEOMETRYCOLLECTION (LINESTRING (0 0, 1 1, 2 1))
## GEOMETRYCOLLECTION (MULTILINESTRING ((2 2, 1 3)...
## GEOMETRYCOLLECTION (MULTILINESTRING ((4 4, 4 3)...
<span class="kw">class</span>(<span class="kw">st_cast</span>(sfc))
## [1] &quot;sfc_GEOMETRY&quot; &quot;sfc&quot;
<span class="kw">class</span>(<span class="kw">st_cast</span>(<span class="kw">st_cast</span>(sfc), <span class="st">&quot;MULTILINESTRING&quot;</span>))
## [1] &quot;sfc_MULTILINESTRING&quot; &quot;sfc&quot;</code></pre></div>
</div>
</div>
<div id="affine-transformations" class="section level2">
<h2>Affine transformations</h2>
<p>Affine transformations are transformations of the type <span class="math inline">\(f(x) = xA + b\)</span>, where matrix <span class="math inline">\(A\)</span> is used to flatten, scale and/or rotate, and <span class="math inline">\(b\)</span> to translate <span class="math inline">\(x\)</span>. Low-level examples are:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dt">p =</span> <span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>)))
## POINT (0 2)
p <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
## POINT (1 3)
p <span class="op">+</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)
## POINT (1 4)
p <span class="op">+</span><span class="st"> </span>p
## POINT (0 4)
p <span class="op">*</span><span class="st"> </span>p
## POINT (0 4)
rot =<span class="st"> </span><span class="cf">function</span>(a) <span class="kw">matrix</span>(<span class="kw">c</span>(<span class="kw">cos</span>(a), <span class="kw">sin</span>(a), <span class="op">-</span><span class="kw">sin</span>(a), <span class="kw">cos</span>(a)), <span class="dv">2</span>, <span class="dv">2</span>)
p <span class="op">*</span><span class="st"> </span><span class="kw">rot</span>(pi<span class="op">/</span><span class="dv">4</span>)
## POINT (1.414214 1.414214)
p <span class="op">*</span><span class="st"> </span><span class="kw">rot</span>(pi<span class="op">/</span><span class="dv">2</span>)
## POINT (2 1.224647e-16)
p <span class="op">*</span><span class="st"> </span><span class="kw">rot</span>(pi)
## POINT (2.449294e-16 -2)</code></pre></div>
<p>Just to make the point, we can for instance rotate the counties of North Carolina 90 degrees clockwise around their centroid, and shrink them to 75% of their original size:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nc =<span class="st"> </span><span class="kw">st_read</span>(<span class="kw">system.file</span>(<span class="st">&quot;shape/nc.shp&quot;</span>, <span class="dt">package=</span><span class="st">&quot;sf&quot;</span>), <span class="dt">quiet =</span> <span class="ot">TRUE</span>)
ncg =<span class="st"> </span><span class="kw">st_geometry</span>(nc)
<span class="kw">plot</span>(ncg, <span class="dt">border =</span> <span class="st">'grey'</span>)
cntrd =<span class="st"> </span><span class="kw">st_centroid</span>(ncg)
## Warning in st_centroid.sfc(ncg): st_centroid does not give correct centroids for
## longitude/latitude data
ncg2 =<span class="st"> </span>(ncg <span class="op">-</span><span class="st"> </span>cntrd) <span class="op">*</span><span class="st"> </span><span class="kw">rot</span>(pi<span class="op">/</span><span class="dv">2</span>) <span class="op">*</span><span class="st"> </span><span class="fl">.75</span> <span class="op">+</span><span class="st"> </span>cntrd
<span class="kw">plot</span>(ncg2, <span class="dt">add =</span> <span class="ot">TRUE</span>)
<span class="kw">plot</span>(cntrd, <span class="dt">col =</span> <span class="st">'red'</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">cex =</span> <span class="fl">.5</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="coordinate-reference-systems-conversion-and-transformation" class="section level2">
<h2>Coordinate reference systems conversion and transformation</h2>
<div id="getting-and-setting-coordinate-reference-systems-of-sf-objects" class="section level3">
<h3>Getting and setting coordinate reference systems of sf objects</h3>
<p>The coordinate reference system of objects of class <code>sf</code> or <code>sfc</code> is obtained by <code>st_crs</code>, and replaced by <code>st_crs&lt;-</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(sf)
geom =<span class="st"> </span><span class="kw">st_sfc</span>(<span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)), <span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">11</span>,<span class="dv">12</span>)))
s =<span class="st"> </span><span class="kw">st_sf</span>(<span class="dt">a =</span> <span class="dv">15</span><span class="op">:</span><span class="dv">16</span>, <span class="dt">geometry =</span> geom)
<span class="kw">st_crs</span>(s)
## Coordinate Reference System: NA
s1 =<span class="st"> </span>s
<span class="kw">st_crs</span>(s1) &lt;-<span class="st"> </span><span class="dv">4326</span>
<span class="kw">st_crs</span>(s1)
## Coordinate Reference System:
##   User input: EPSG:4326 
##   wkt:
## GEOGCRS[&quot;WGS 84&quot;,
##     DATUM[&quot;World Geodetic System 1984&quot;,
##         ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
##             LENGTHUNIT[&quot;metre&quot;,1]]],
##     PRIMEM[&quot;Greenwich&quot;,0,
##         ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     CS[ellipsoidal,2],
##         AXIS[&quot;geodetic latitude (Lat)&quot;,north,
##             ORDER[1],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##         AXIS[&quot;geodetic longitude (Lon)&quot;,east,
##             ORDER[2],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     USAGE[
##         SCOPE[&quot;unknown&quot;],
##         AREA[&quot;World&quot;],
##         BBOX[-90,-180,90,180]],
##     ID[&quot;EPSG&quot;,4326]]
s2 =<span class="st"> </span>s
<span class="kw">st_crs</span>(s2) &lt;-<span class="st"> &quot;+proj=longlat +datum=WGS84&quot;</span>
<span class="kw">all.equal</span>(s1, s2)
## [1] &quot;Component \&quot;geometry\&quot;: Attributes: &lt; Component \&quot;crs\&quot;: Component \&quot;input\&quot;: 1 string mismatch &gt;&quot;
## [2] &quot;Component \&quot;geometry\&quot;: Attributes: &lt; Component \&quot;crs\&quot;: Component \&quot;wkt\&quot;: 1 string mismatch &gt;&quot;</code></pre></div>
<p>an alternative, more pipe-friendly version of <code>st_crs&lt;-</code> is</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_set_crs</span>(<span class="dv">4326</span>)
## Simple feature collection with 2 features and 1 field
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 0 ymin: 1 xmax: 11 ymax: 12
## geographic CRS: WGS 84
##    a      geometry
## 1 15   POINT (0 1)
## 2 16 POINT (11 12)</code></pre></div>
</div>
<div id="coordinate-reference-system-transformations" class="section level3">
<h3>Coordinate reference system transformations</h3>
<p>If we change the coordinate reference system from one non-missing value into another non-missing value, the crs is is changed without modifying any coordinates, but a warning is issued that this did not reproject values:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s3 &lt;-<span class="st"> </span>s1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_set_crs</span>(<span class="dv">4326</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_set_crs</span>(<span class="dv">3857</span>)
## Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform for
## that</code></pre></div>
<p>A cleaner way to do this that better expresses intention and does not generate this warning is to first wipe the CRS by assigning it a missing value, and then setting it to the intended value.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s3 &lt;-<span class="st"> </span>s1  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_set_crs</span>(<span class="ot">NA</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_set_crs</span>(<span class="dv">3857</span>)</code></pre></div>
<p>To carry out a coordinate conversion or transformation, we use <code>st_transform</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s3 &lt;-<span class="st"> </span>s1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_transform</span>(<span class="dv">3857</span>)
s3
## Simple feature collection with 2 features and 1 field
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 0 ymin: 111325.1 xmax: 1224514 ymax: 1345708
## projected CRS:  WGS 84 / Pseudo-Mercator
##    a                geometry
## 1 15      POINT (0 111325.1)
## 2 16 POINT (1224514 1345708)</code></pre></div>
<p>for which we see that coordinates are actually modified (projected).</p>
</div>
</div>
<div id="geometrical-operations" class="section level2">
<h2>Geometrical operations</h2>
<p>All geometrical operations <code>st_op(x)</code> or <code>st_op2(x,y)</code> work both for <code>sf</code> objects as well as <code>sfc</code> objects <code>x</code> and <code>y</code>; since the operations work on the geometries, the non-geometries parts of an <code>sf</code> object are simply discarded. Also, all binary operations <code>st_op2(x,y)</code> called with a single argument, as <code>st_op2(x)</code>, are handled as <code>st_op2(x,x)</code>.</p>
<p>We will illustrate the geometrical operations on a very simple dataset:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">b0 =<span class="st"> </span><span class="kw">st_polygon</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>))))
b1 =<span class="st"> </span>b0 <span class="op">+</span><span class="st"> </span><span class="dv">2</span>
b2 =<span class="st"> </span>b0 <span class="op">+</span><span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="fl">0.2</span>, <span class="dv">2</span>)
x =<span class="st"> </span><span class="kw">st_sfc</span>(b0, b1, b2)
a0 =<span class="st"> </span>b0 <span class="op">*</span><span class="st"> </span><span class="fl">0.8</span>
a1 =<span class="st"> </span>a0 <span class="op">*</span><span class="st"> </span><span class="fl">0.5</span> <span class="op">+</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="fl">0.7</span>)
a2 =<span class="st"> </span>a0 <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
a3 =<span class="st"> </span>b0 <span class="op">*</span><span class="st"> </span><span class="fl">0.5</span> <span class="op">+</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="fl">-0.5</span>)
y =<span class="st"> </span><span class="kw">st_sfc</span>(a0,a1,a2,a3)
<span class="kw">plot</span>(x, <span class="dt">border =</span> <span class="st">'red'</span>)
<span class="kw">plot</span>(y, <span class="dt">border =</span> <span class="st">'green'</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAABj1BMVEUC/wIG/wYJ/wkK/woL/wsO/w4P/w8R/xES/xIW/xYY/xga6AMa/Bca/xod/x0f/x8r/yss/ywv/y88/zw+/z5A/0BBxwlB9jhB/0FEwwhEzhNE7DFE9zxE/0RH/0dM/0xQ/1BS/1JV/1VW/1ZX/1dYqQJY6UJY/1herg1e8lFe/15j/2Np/2lt/21w/3B3qSF33lZ3/3d6/3qInSaI2WKI/4iW/5aZ/5mc/5yf/5+hcxWh6oyh/6GnWwOn1n6n/6eo/6iq/6qt/620/7S2/7a7Wxe7eDS7y4e76KS7/7u+Whm+5qW+/77D/8PI/8jP/8/Q/9DU/9TW/9bg/+Dh/+Hi/+LlOR/l4Mbl/+Xs/+zu/+7x//H+//7/AQH/BAT/BQX/FRX/Fxf/Ghr/Hx//ICD/ISH/IiL/Kyv/Pz//R0f/Skr/VFT/VVX/YGD/YWH/b2//d3f/e3v/iIj/iYn/jY3/kJD/lZX/oKD/qqr/rKz/uLj/wMD/wsL/w8P/xsb/1NT/3d3/4OD/7u7/9fX////t/k5iAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEEElEQVR4nO3d51MTQQBAcRQFK2KvWGLvomJvsXdRxIpdUOyKFRti/nBPxnHYhMvz9Awkeb8PO7OX7M3Om1lmjoShJqeiaoZ7AyOdgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBQEkDfXmS3LPv0cK3f7HwVTp7LmmgN4/eJ3b7W7Sw+2Xida8fpLPn0gZ6nnzNvYFAvYnXfTVQcQYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAhUbqLUpNHdBNMyb31RofdH7VGyg/TNPBI4cj4ajx04UODC56H0qN9DKcB57xK4YaICB8hgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAj8SaD2pZlMZtHoTOhc8J6qDnS6MZvNbq/PBmbsCd5TnoGe9kU+fyxm34pwfudTtOThu77BTs2OhsuTgmt9q3cH095yDPShK3L3xq1i9i7Pu3A/WnPzbtdgJ2dFw6WJwbWuVbvC+eN09lz6v3ru7S76cv4RG5B/xObkCn9IrwmPWFoMBAwEDASGKdDV8fUxxowK5+Ov5qoxUFvDtRg7loTzhrZcVQaaEvdy/hGbYqCQgQwEDAQMBAwEDAQMBAwEDATSCDQ9ega5MCF8JllmoN9ax0VPsXU1eY+5h9Pfa65MAw2Aj33SMvICTWsJ1DdHw5atLQU2V2mgi82hseuiYeOm5kLbSrLdERcoX+wRKxEDAQOBMgx0NhvnTOqbLctAUxdmhra4LvXNlmWgxvMxb70+9l/2FcNAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQGCYArXXxvxeuUBte64aA3Uciv1oIs+hjlw1BkrIQMBAoLoCdb5IrDMItHaIr3r8tKEyAvX3vEqsp3/QDQ4Wflfol53/Ybv+p15gIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIPADu7CCS6gtyv8AAAAASUVORK5CYII=" /><!-- --></p>
<div id="unary-operations" class="section level3">
<h3>Unary operations</h3>
<p><code>st_is_valid</code> returns whether polygon geometries are topologically valid:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">b0 =<span class="st"> </span><span class="kw">st_polygon</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>))))
b1 =<span class="st"> </span><span class="kw">st_polygon</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>), <span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>))))
<span class="kw">st_is_valid</span>(<span class="kw">st_sfc</span>(b0,b1))
## [1]  TRUE FALSE</code></pre></div>
<p>and <code>st_is_simple</code> whether line geometries are simple:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s =<span class="st"> </span><span class="kw">st_sfc</span>(<span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))), 
    <span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>))))
<span class="kw">st_is_simple</span>(s)
## [1]  TRUE FALSE</code></pre></div>
<p><code>st_area</code> returns the area of polygon geometries, <code>st_length</code> the length of line geometries:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_area</span>(x)
## [1] 4 4 4
<span class="kw">st_area</span>(<span class="kw">st_sfc</span>(<span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))))
## [1] 0
<span class="kw">st_length</span>(<span class="kw">st_sfc</span>(<span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))), <span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>)))))
## [1] 2.414214 1.000000
<span class="kw">st_length</span>(<span class="kw">st_sfc</span>(<span class="kw">st_multilinestring</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))),<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>))))) <span class="co"># ignores 2nd part!</span>
## [1] 2.414214</code></pre></div>
</div>
<div id="binary-operations-distance-and-relate" class="section level3">
<h3>Binary operations: distance and relate</h3>
<p><code>st_distance</code> computes the shortest distance matrix between geometries; this is a dense matrix:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_distance</span>(x,y)
##           [,1] [,2] [,3]     [,4]
## [1,] 0.0000000  0.6    0 0.500000
## [2,] 0.2828427  0.0    0 1.000000
## [3,] 0.2000000  0.8    0 1.220656</code></pre></div>
<p><code>st_relate</code> returns a dense character matrix with the DE9-IM relationships between each pair of geometries:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_relate</span>(x,y)
##      [,1]        [,2]        [,3]        [,4]       
## [1,] &quot;212FF1FF2&quot; &quot;FF2FF1212&quot; &quot;212101212&quot; &quot;FF2FF1212&quot;
## [2,] &quot;FF2FF1212&quot; &quot;212101212&quot; &quot;212101212&quot; &quot;FF2FF1212&quot;
## [3,] &quot;FF2FF1212&quot; &quot;FF2FF1212&quot; &quot;212101212&quot; &quot;FF2FF1212&quot;</code></pre></div>
<p>element [i,j] of this matrix has nine characters, referring to relationship between x[i] and y[j], encoded as <span class="math inline">\(I_xI_y,I_xB_y,I_xE_y,B_xI_y,B_xB_y,B_xE_y,E_xI_y,E_xB_y,E_xE_y\)</span> where <span class="math inline">\(I\)</span> refers to interior, <span class="math inline">\(B\)</span> to boundary, and <span class="math inline">\(E\)</span> to exterior, and e.g. <span class="math inline">\(B_xI_y\)</span> the dimensionality of the intersection of the the boundary <span class="math inline">\(B_x\)</span> of x[i] and the interior <span class="math inline">\(I_y\)</span> of y[j], which is one of {0,1,2,F}, indicating zero-, one-, two-dimension intersection, and (F) no intersection, respectively.</p>
</div>
<div id="binary-logical-operations" class="section level3">
<h3>Binary logical operations:</h3>
<p>Binary logical operations return either a sparse matrix</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_intersects</span>(x,y)
## Sparse geometry binary predicate list of length 3, where the predicate was `intersects'
##  1: 1, 3
##  2: 2, 3
##  3: 3</code></pre></div>
<p>or a dense matrix</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_intersects</span>(x, x, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##      [,1]  [,2]  [,3]
## [1,] TRUE  TRUE  TRUE
## [2,] TRUE  TRUE FALSE
## [3,] TRUE FALSE  TRUE
<span class="kw">st_intersects</span>(x, y, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2] [,3]  [,4]
## [1,]  TRUE FALSE TRUE FALSE
## [2,] FALSE  TRUE TRUE FALSE
## [3,] FALSE FALSE TRUE FALSE</code></pre></div>
<p>where list element <code>i</code> of a sparse matrix contains the indices of the <code>TRUE</code> elements in row <code>i</code> of the the dense matrix. For large geometry sets, dense matrices take up a lot of memory and are mostly filled with <code>FALSE</code> values, hence the default is to return a sparse matrix.</p>
<p><code>st_intersects</code> returns for every geometry pair whether they intersect (dense matrix), or which elements intersect (sparse). Note that the function <code>st_intersection</code> in this package returns a geometry for the intersection instead of logicals as in <code>st_intersects</code> (see the next section of this vignette).</p>
<p>Other binary predicates include (using sparse for readability):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">st_disjoint</span>(x, y, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2]  [,3] [,4]
## [1,] FALSE  TRUE FALSE TRUE
## [2,]  TRUE FALSE FALSE TRUE
## [3,]  TRUE  TRUE FALSE TRUE
<span class="kw">st_touches</span>(x, y, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2]  [,3]  [,4]
## [1,] FALSE FALSE FALSE FALSE
## [2,] FALSE FALSE FALSE FALSE
## [3,] FALSE FALSE FALSE FALSE
<span class="kw">st_crosses</span>(s, s, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2]
## [1,] FALSE FALSE
## [2,] FALSE FALSE
<span class="kw">st_within</span>(x, y, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2]  [,3]  [,4]
## [1,] FALSE FALSE FALSE FALSE
## [2,] FALSE FALSE FALSE FALSE
## [3,] FALSE FALSE FALSE FALSE
<span class="kw">st_contains</span>(x, y, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2]  [,3]  [,4]
## [1,]  TRUE FALSE FALSE FALSE
## [2,] FALSE FALSE FALSE FALSE
## [3,] FALSE FALSE FALSE FALSE
<span class="kw">st_overlaps</span>(x, y, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2] [,3]  [,4]
## [1,] FALSE FALSE TRUE FALSE
## [2,] FALSE  TRUE TRUE FALSE
## [3,] FALSE FALSE TRUE FALSE
<span class="kw">st_equals</span>(x, y, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2]  [,3]  [,4]
## [1,] FALSE FALSE FALSE FALSE
## [2,] FALSE FALSE FALSE FALSE
## [3,] FALSE FALSE FALSE FALSE
<span class="kw">st_covers</span>(x, y, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2]  [,3]  [,4]
## [1,]  TRUE FALSE FALSE FALSE
## [2,] FALSE FALSE FALSE FALSE
## [3,] FALSE FALSE FALSE FALSE
<span class="kw">st_covered_by</span>(x, y, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2]  [,3]  [,4]
## [1,] FALSE FALSE FALSE FALSE
## [2,] FALSE FALSE FALSE FALSE
## [3,] FALSE FALSE FALSE FALSE
<span class="kw">st_covered_by</span>(y, y, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2]  [,3]  [,4]
## [1,]  TRUE FALSE FALSE FALSE
## [2,] FALSE  TRUE FALSE FALSE
## [3,] FALSE FALSE  TRUE FALSE
## [4,] FALSE FALSE FALSE  TRUE
<span class="kw">st_equals_exact</span>(x, y,<span class="fl">0.001</span>, <span class="dt">sparse =</span> <span class="ot">FALSE</span>)
##       [,1]  [,2]  [,3]  [,4]
## [1,] FALSE FALSE FALSE FALSE
## [2,] FALSE FALSE FALSE FALSE
## [3,] FALSE FALSE FALSE FALSE</code></pre></div>
</div>
<div id="operations-returning-a-geometry" class="section level3">
<h3>Operations returning a geometry</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">u =<span class="st"> </span><span class="kw">st_union</span>(x)
<span class="kw">plot</span>(u)</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAclBMVEUEBAQVFRUZGRkaGhofHx8hISEiIiIrKys/Pz9HR0dKSkpPT09UVFRVVVVcXFxgYGBvb293d3d7e3uCgoKIiIiJiYmNjY2QkJCVlZWgoKCqqqqsrKy4uLjCwsLGxsbU1NTd3d3g4ODu7u709PT19fX///9otTGkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACt0lEQVR4nO3d3U4TURiG0YJQBAVFftWCteD936IjCac82aQZbFjr/E2+PMk+nMziDy9avPUB/zuBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAoVZA92fjjt7nIa3rxhebOfmWQPdnPwYtvd7Gh5/G95dH23n5nkDfR3fHDwFWg3vfgn0MoGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAq7GejLevIwtDm4myYfv69HrXYx0M/lZP/T0Obk32bxYTns83Zunv+r59Xx+OYVT2xbBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBApvEOjwfNjhewq0ubocdrWZ/cxn/tQbBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQOEvmfmMkW7nPb0AAAAASUVORK5CYII=" /><!-- --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="dt">mar =</span> <span class="kw">rep</span>(<span class="dv">0</span>,<span class="dv">4</span>))
<span class="kw">plot</span>(<span class="kw">st_buffer</span>(u, <span class="fl">0.2</span>))
<span class="kw">plot</span>(u, <span class="dt">border =</span> <span class="st">'red'</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)
<span class="kw">plot</span>(<span class="kw">st_buffer</span>(u, <span class="fl">0.2</span>), <span class="dt">border =</span> <span class="st">'grey'</span>)
<span class="kw">plot</span>(u, <span class="dt">border =</span> <span class="st">'red'</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)
<span class="kw">plot</span>(<span class="kw">st_buffer</span>(u, <span class="fl">-0.2</span>), <span class="dt">add =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">st_boundary</span>(x))</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAeFBMVEUBAQEEBAQFBQUVFRUXFxcaGhofHx8gICAhISEiIiIrKys/Pz9HR0dKSkpUVFRVVVVgYGBhYWFvb293d3d7e3uIiIiJiYmNjY2QkJCVlZWgoKCqqqqsrKy4uLjAwMDCwsLDw8PGxsbU1NTd3d3g4ODu7u719fX///+mRGB2AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACt0lEQVR4nO3d2UocURhG0XaMGhMTZ5N0HDrq+7+hheCtmyNNGXGt+w9+NpzLohaPvGrx3gf87wQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFGYNdHs07ufDNLx6w/BsPTfPGujy2+9hW/+m4eHp8O7iYD03zxvoeHyz+xxoOby7E+h1AgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFAQKAgWBgkBBoCBQECgIFD5moB+ryc3fEdvX0+Trr9Wo5UcM9Gd/srPYHPJl2mzs7A/7vp6b5//qeXk4vnnDE1sXgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgYJAQaAgUBAoCBQECgIFgcI7BNo7Gbb3mQLdn58NO7+f/cwX/tQbBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQEGgIFAQKAgUBAoCBYGCQOEJ1IUMx1ZGanQAAAAASUVORK5CYII=" /><!-- --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>))
<span class="kw">plot</span>(<span class="kw">st_convex_hull</span>(x))
<span class="kw">plot</span>(<span class="kw">st_convex_hull</span>(u))</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAwFBMVEUDAwMFBQUGBgYJCQkKCgoODg4REREVFRUXFxcZGRkbGxscHBwdHR0iIiIjIyMlJSUmJiYnJycpKSksLCwxMTE2NjY4ODg7Ozs+Pj4/Pz9AQEBBQUFPT09YWFhaWlpdXV1gYGBxcXF0dHSKioqNjY2goKChoaGkpKSmpqanp6ezs7O+vr6/v7/AwMDGxsbJycnQ0NDT09PU1NTV1dXY2NjZ2dna2trd3d3h4eHl5eXu7u7v7+/x8fHy8vLz8/P///9rCmmFAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADKElEQVR4nO3Z124TURRA0UDoBEIn9N5CQu8t//9XvJDBFGXb1lA0WvvpzpU992hpHsbyyo72bOVfD/C/BygCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQNDbQx7dD7z9/X78b+Zhl5plt/nnGBjq7dmK3/RtHh/Xqk5HPWWKe2eafZ2yg9TfD8tT5rWF95fHI58zbzDyzzT8PoAhQBCgCFAGKAEWAIkDR6ECb27utnXs4vNpfAPStq6sr+3ZbOTa82p98PvI583bm5e92Xx2Ze57Rf81f2h6Wl7f2+Nxf6rePyuu1e3PfYOpA1x/8ureIz+SBbt/5ZWshn8kD3b31885iPpMHenTtp40FfSYPtL3x4/WiPpMHerP+w+XCPpMH+nJg9mpxn8kD7Rz89H29hM8fANr8sNvF/wHo9NNhnmfHF/cZH+jmoaHDL8a++RLdmJnn/hLf98dhBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAIkARoAhQBCgCFAGKAEWAoq+3F5IR85l0sQAAAABJRU5ErkJggg==" /><!-- --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))
<span class="kw">plot</span>(x)
<span class="kw">plot</span>(<span class="kw">st_centroid</span>(x), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> <span class="st">'red'</span>)
<span class="kw">plot</span>(x)
<span class="kw">plot</span>(<span class="kw">st_centroid</span>(u), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> <span class="st">'red'</span>)</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAACFlBMVEUDAwMFBQUGBgYJCQkREREWFhYZGRkbGxsdAwMdHR0iIiIjIyMkBAQlJSUmJiYpBAQsLCwxMTE2NjY4ODg7Ozs+Pj4/Pz9AQEBBQUFGMjJMHBxPT09ZLS1dNjZgYGB4GBimpqayDg6zs7O+vr6/v7/AwMDGxsbSU1PT09PU1NTVf3/Xd3fa2trba2vcbGzd3d3hWVni4uLlT0/m5ubnAwPqAADtBQXuBgbu7u7vaGjv7+/y8vL5EBD/Dg7/Dw//ERH/EhL/ExP/FRX/Fhb/Fxf/GBj/Ghr/Gxv/HBz/Hh7/ICD/ISH/IiL/JCT/Jib/Jyf/KSn/Kyv/Ly//MDD/NDT/NTX/Njb/PDz/PT3/RUX/Rkb/S0v/TU3/Tk7/T0//U1P/Wlr/YGD/YWH/YmL/ZGT/a2v/bW3/b2//cHD/cnL/dHT/dXX/eHj/enr/fX3/fn7/f3//gID/gYH/goL/hYX/hob/ior/i4v/jIz/jo7/lpb/n5//oaH/pKT/pqb/p6f/qan/sLD/sbH/tLT/tbX/trb/ubn/urr/vLz/wsL/w8P/xcX/xsb/x8f/ysr/y8v/zs7/z8//0ND/0dH/1tb/2Nj/2dn/2tr/29v/3Nz/3d3/4eH/4uL/4+P/5OT/5eX/5ub/5+f/6Oj/6en/6ur/7Oz/7e3/7u7/8PD/8fH/9PT/9fX/+Pj/+fn/+/v//Pz//f3///+HPTxOAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEcUlEQVR4nO3Z6VcVdRyAccpKrVArvWW5pHKzlExTyzQJSFxIc6lAsdRbae5mu7nllrnikimRG4GkFjr/oTPDubc39/gIDsx98TwvfvM7c4D5ns85d5g5tyyw+1aW9gClnkCQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAUNJAs98oNH3O//tpCV+m/+ZJGmjY4CfzPTriicJ+wCsJX6ff5kkaqLwyXK5fuhOuQ56tCNeOC13h+sKEhK/To3m6656nuwefpw+AfltWt6Rm1914oNMNNUvn7vhXoELllcfmHw2Clsbt0UC/z/slCK59+oVAhcorm/ZFx7aqW+FAn/8Y7W/XtgqUr7yy9u9483FzONBHZ+L9mgOpA93c+83YkaUBtKA13iw/FwI1nIz3TYfTBvp1wdod496aVDidJtC6H6Lj+bquEGjLV9H+SnVnykBttSfCj9iody/mT6cJ1FL3bWvn/oX7os98e/2mln8OLf0p7Zv0z7kgugdN/Tp/OtV/81dyi95bdbz7ptixYXHVysOpPwdt/T6I5pmcy59OEWh8Nt/gZ14uPNo/lxpQPM+UN+N5Jr7T83mSBnppQNkj+coGFh7tn3o14ev0bJ6nZw4N10EzXuz5PIm/zWey4XLjj+j94vkK+uF+KJ4n2PP+pt3b3n69F7/fF0DNDdUfVu38r5SAgtbvcjtH92aePgCK3y+urv6ypICiejVPHwDl4veLW7V/CVSsTHbF2Xjz2UGBipXJfnIq3jQdEahYmezmjdHxcnWnQMXKZNvrN/95M3q/EKhY4UAd6z+Y23iopJ6D4koEaPysfMNLAugh50kcaMxjhR5/Lek/3osedh6/OIQEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBILuAQFP45CJVkorAAAAAElFTkSuQmCC" /><!-- --></p>
<p>The intersection of two geometries is the geometry covered by both; it is obtained by <code>st_intersection</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(x)
<span class="kw">plot</span>(y, <span class="dt">add =</span> <span class="ot">TRUE</span>)
<span class="kw">plot</span>(<span class="kw">st_intersection</span>(<span class="kw">st_union</span>(x),<span class="kw">st_union</span>(y)), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> <span class="st">'red'</span>)</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAABWVBMVEUAAAABAQECAgIDAwMEAAAEBAQFBQUKAAAKCgoNDQ0ODg4PDw8QEBARERESEhIUFBQVFRUXAAAYGBgaGhocHBwdAAAfAAAfHx8hISEiAAAiIiImAAArKyssLCw4ODg5OTk8PDw+AABAAABBQUFERERHAABHR0dKAABKSkpPT09QUFBRAABTU1NUVFRVAABVVVVXV1dYAABYWFheXl5gYGBhYWFjAABjY2NmZmZtbW1vb29wcHBxcXF3d3d6enp7e3t/f3+FhYWHAACIAACIiIiJiYmNjY2QkJCUlJSVlZWWlpafn5+gAAChoaGlAACoAACoqKiqAACqqqqsrKytra2yAAC2tra4AAC4uLi7AAC7u7u+vr7AwMDDw8PFxcXGxsbIyMjQ0NDU1NTW1tba2trdAADd3d3g4ODlAADl5eXmAADuAADu7u7x8fH19fX9/f3+AAD/AAD///8xnfLJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD60lEQVR4nO3d11MTURhA8RBUFAgWFBEBG8bee0cFsRdsgIKIii2K8P8/uMQZ9SbZHMIkgSTn97APyd4735yZfcruJrGgohIrPcBqZyBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIGAgYCBgIFDVQO9OlO7cz2jhvWUsHCrPzFUNNHJwtGSbPkcL0zdKXnentzwzVzfQ5dLXbM8GGit53YyBijMQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEKjbQKMdoeSugYGB9Rs68vUV3aduA13aOx7YPDIxMdF6azzPk+ai+9RvoFPzga6p6MONr+fzfDGQgQoxEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQWHKgb4mtoafBPgb69fJZYM/FYJ/aDHR2NjL5tpijuYHuRh+2P/yEjpye/d9YLQZ63hPpbFpXTDIn0IEdkTXNwTnNi1usTeQsbOsJHCvPzNV/6nksXfTr3Essa//N4Jw3+6LD185w4ZlHZR70DwMBAwEDgRUK9DHZFCNx3kDRYWrb9zgF+jRioK5CHWIZyED/GAgYCBgIGAgYCBgIGAgYCJQj0O5MJvNhSyZw0kB/ve9IpVJtyVToVUXGrclAWbmXWIWs+kCPb0d2pofyXDdQVldvf39/+6Fr+e5XZdzVH2jxd7FlPKtRLgYCBgI1GGg69v2tkxUYtwYD9aVj3v97uK0C49ZgoN6ZmJ1/tFZgXAMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDgRUKNN1yfIlaphcaMdDc4NUlGpxbaMRAJTIQMBBorEDdBe7UAN1BoAsxZ12pj0CZ4fx7fchw5r8NXsSe9qAC4/pPvcBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBAwEDAQMBA4Dd3vaNWySV+AgAAAABJRU5ErkJggg==" /><!-- --> Note that the function <code>st_intersects</code> returns a logical matrix indicating whether each geometry pair intersects (see the previous section in this vignette).</p>
<p>To get <em>everything but</em> the intersection, use <code>st_difference</code> or st_sym_difference`:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>))
<span class="kw">plot</span>(x, <span class="dt">col =</span> <span class="st">'#ff333388'</span>); 
<span class="kw">plot</span>(y, <span class="dt">add=</span><span class="ot">TRUE</span>, <span class="dt">col=</span><span class="st">'#33ff3388'</span>)
<span class="kw">title</span>(<span class="st">&quot;x: red, y: green&quot;</span>)
<span class="kw">plot</span>(x, <span class="dt">border =</span> <span class="st">'grey'</span>)
<span class="kw">plot</span>(<span class="kw">st_difference</span>(<span class="kw">st_union</span>(x),<span class="kw">st_union</span>(y)), <span class="dt">col =</span> <span class="st">'lightblue'</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)
<span class="kw">title</span>(<span class="st">&quot;difference(x,y)&quot;</span>)
<span class="kw">plot</span>(x, <span class="dt">border =</span> <span class="st">'grey'</span>)
<span class="kw">plot</span>(<span class="kw">st_difference</span>(<span class="kw">st_union</span>(y),<span class="kw">st_union</span>(x)), <span class="dt">col =</span> <span class="st">'lightblue'</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)
<span class="kw">title</span>(<span class="st">&quot;difference(y,x)&quot;</span>)
<span class="kw">plot</span>(x, <span class="dt">border =</span> <span class="st">'grey'</span>)
<span class="kw">plot</span>(<span class="kw">st_sym_difference</span>(<span class="kw">st_union</span>(y),<span class="kw">st_union</span>(x)), <span class="dt">col =</span> <span class="st">'lightblue'</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)
<span class="kw">title</span>(<span class="st">&quot;sym_difference(x,y)&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Function <code>st_segmentize</code> adds points to straight line sections of a lines or polygon object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),<span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>))
pts =<span class="st"> </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>))
ls =<span class="st"> </span><span class="kw">st_linestring</span>(pts)
<span class="kw">plot</span>(ls)
<span class="kw">points</span>(pts)
ls.seg =<span class="st"> </span><span class="kw">st_segmentize</span>(ls, <span class="fl">0.3</span>)
<span class="kw">plot</span>(ls.seg)
pts =<span class="st"> </span>ls.seg
<span class="kw">points</span>(pts)
pol =<span class="st"> </span><span class="kw">st_polygon</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>),<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))))
pol.seg =<span class="st"> </span><span class="kw">st_segmentize</span>(pol, <span class="fl">0.3</span>)
<span class="kw">plot</span>(pol.seg, <span class="dt">col =</span> <span class="st">'grey'</span>)
<span class="kw">points</span>(pol.seg[[<span class="dv">1</span>]])</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Function <code>st_polygonize</code> polygonizes a multilinestring, as far as the points form a closed polygon:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),<span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>))
mls =<span class="st"> </span><span class="kw">st_multilinestring</span>(<span class="kw">list</span>(<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>),,<span class="dv">2</span>,<span class="dt">byrow=</span><span class="ot">TRUE</span>)))
x =<span class="st"> </span><span class="kw">st_polygonize</span>(mls)
<span class="kw">plot</span>(mls, <span class="dt">col =</span> <span class="st">'grey'</span>)
<span class="kw">title</span>(<span class="st">&quot;multilinestring&quot;</span>)
<span class="kw">plot</span>(x, <span class="dt">col =</span> <span class="st">'grey'</span>)
<span class="kw">title</span>(<span class="st">&quot;polygon&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
